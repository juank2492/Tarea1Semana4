<div class="container-fluid vh-100">
  <div class="row h-100">
    <!-- Imagen o información del lado izquierdo -->
    <div class="col-lg-6 d-none d-lg-flex align-items-center justify-content-center bg-primary">
      <div class="text-center text-white">
        <i class="fas fa-utensils fa-5x mb-4"></i>
        <h1 class="display-4 fw-bold mb-3">Restaurante Delicioso</h1>
        <p class="lead">La mejor experiencia culinaria de la ciudad</p>
        <p>Sistema de gestión integral para restaurantes</p>
      </div>
    </div>
    
    <!-- Formularios del lado derecho -->
    <div class="col-lg-6 d-flex align-items-center justify-content-center bg-light">
      <div class="auth-container w-100">
        
        <!-- Encabezado -->
        <div class="text-center mb-4">
          <i class="fas fa-utensils fa-3x text-primary mb-3 d-lg-none"></i>
          <h2 class="fw-bold">{{ showLogin() ? 'Iniciar Sesión' : 'Registrarse' }}</h2>
          <p class="text-muted">
            {{ showLogin() ? 'Ingresa a tu cuenta para continuar' : 'Crea tu cuenta para comenzar' }}
          </p>
        </div>

        <!-- Formulario de Login -->
        <form *ngIf="showLogin()" [formGroup]="loginForm" (ngSubmit)="onLoginSubmit()">
          <div class="mb-3">
            <label for="loginEmail" class="form-label">Correo Electrónico</label>
            <div class="input-group">
              <span class="input-group-text"><i class="fas fa-envelope"></i></span>
              <input
                type="email"
                id="loginEmail"
                class="form-control"
                [class.is-invalid]="loginEmail?.invalid && loginEmail?.touched"
                formControlName="email"
                placeholder="tu@email.com">
            </div>
            <div class="invalid-feedback" *ngIf="loginEmail?.invalid && loginEmail?.touched">
              <span *ngIf="loginEmail?.errors?.['required']">El correo electrónico es requerido</span>
              <span *ngIf="loginEmail?.errors?.['email']">Ingresa un correo electrónico válido</span>
            </div>
          </div>

          <div class="mb-3">
            <label for="loginPassword" class="form-label">Contraseña</label>
            <div class="input-group">
              <span class="input-group-text"><i class="fas fa-lock"></i></span>
              <input
                [type]="showPassword() ? 'text' : 'password'"
                id="loginPassword"
                class="form-control"
                [class.is-invalid]="loginPassword?.invalid && loginPassword?.touched"
                formControlName="password"
                placeholder="Tu contraseña">
              <button
                type="button"
                class="btn btn-outline-secondary"
                (click)="togglePasswordVisibility()"
                title="Mostrar u ocultar contraseña">
                <i [class]="showPassword() ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
              </button>
            </div>
            <div class="invalid-feedback" *ngIf="loginPassword?.invalid && loginPassword?.touched">
              <span *ngIf="loginPassword?.errors?.['required']">La contraseña es requerida</span>
              <span *ngIf="loginPassword?.errors?.['minlength']">La contraseña debe tener al menos 6 caracteres</span>
            </div>
          </div>

          <div class="d-grid gap-2 mb-3">
            <button type="submit" class="btn btn-primary btn-lg" [disabled]="loading()">
              <span *ngIf="loading()" class="spinner-border spinner-border-sm me-2"></span>
              <i *ngIf="!loading()" class="fas fa-sign-in-alt me-2"></i>
              {{ loading() ? 'Iniciando sesión...' : 'Iniciar Sesión' }}
            </button>
          </div>
        </form>

        <!-- Formulario de Registro -->
        <form *ngIf="!showLogin()" [formGroup]="registerForm" (ngSubmit)="onRegisterSubmit()">
          <div class="mb-3">
            <label for="nombreUsuario" class="form-label">Nombre de Usuario</label>
            <div class="input-group">
              <span class="input-group-text"><i class="fas fa-user"></i></span>
              <input
                type="text"
                id="nombreUsuario"
                class="form-control"
                [class.is-invalid]="registerNombreUsuario?.invalid && registerNombreUsuario?.touched"
                formControlName="nombreUsuario"
                placeholder="Tu nombre de usuario">
            </div>
            <div class="invalid-feedback" *ngIf="registerNombreUsuario?.invalid && registerNombreUsuario?.touched">
              <span *ngIf="registerNombreUsuario?.errors?.['required']">El nombre de usuario es requerido</span>
              <span *ngIf="registerNombreUsuario?.errors?.['minlength']">El nombre debe tener al menos 3 caracteres</span>
            </div>
          </div>

          <div class="mb-3">
            <label for="registerEmail" class="form-label">Correo Electrónico</label>
            <div class="input-group">
              <span class="input-group-text"><i class="fas fa-envelope"></i></span>
              <input
                type="email"
                id="registerEmail"
                class="form-control"
                [class.is-invalid]="registerEmail?.invalid && registerEmail?.touched"
                formControlName="email"
                placeholder="tu@email.com">
            </div>
            <div class="invalid-feedback" *ngIf="registerEmail?.invalid && registerEmail?.touched">
              <span *ngIf="registerEmail?.errors?.['required']">El correo electrónico es requerido</span>
              <span *ngIf="registerEmail?.errors?.['email']">Ingresa un correo electrónico válido</span>
            </div>
          </div>

          <div class="mb-3">
            <label for="registerPassword" class="form-label">Contraseña</label>
            <div class="input-group">
              <span class="input-group-text"><i class="fas fa-lock"></i></span>
              <input
                [type]="showPassword() ? 'text' : 'password'"
                id="registerPassword"
                class="form-control"
                [class.is-invalid]="registerPassword?.invalid && registerPassword?.touched"
                formControlName="password"
                placeholder="Tu contraseña">
              <button
                type="button"
                class="btn btn-outline-secondary"
                (click)="togglePasswordVisibility()"
                title="Mostrar u ocultar contraseña">
                <i [class]="showPassword() ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
              </button>
            </div>
            <div class="invalid-feedback" *ngIf="registerPassword?.invalid && registerPassword?.touched">
              <span *ngIf="registerPassword?.errors?.['required']">La contraseña es requerida</span>
              <span *ngIf="registerPassword?.errors?.['minlength']">La contraseña debe tener al menos 6 caracteres</span>
            </div>
          </div>

          <div class="mb-3">
            <label for="rol" class="form-label">Tipo de Usuario</label>
            <select class="form-select" id="rol" formControlName="rol">
              <option value="Cliente">Cliente</option>
              <option value="Empleado">Empleado</option>
            </select>
          </div>

          <div class="d-grid gap-2 mb-3">
            <button type="submit" class="btn btn-primary btn-lg" [disabled]="loading()">
              <span *ngIf="loading()" class="spinner-border spinner-border-sm me-2"></span>
              <i *ngIf="!loading()" class="fas fa-user-plus me-2"></i>
              {{ loading() ? 'Registrando...' : 'Registrarse' }}
            </button>
          </div>
        </form>

        <!-- Toggle entre Login/Register -->
        <div class="text-center">
          <p class="mb-0">
            <span *ngIf="showLogin()">¿No tienes cuenta? </span>
            <span *ngIf="!showLogin()">¿Ya tienes cuenta? </span>
            <button 
              type="button"
              class="btn btn-link text-decoration-none fw-bold p-0"
              (click)="toggleForm()">
              {{ showLogin() ? 'Regístrate aquí' : 'Inicia sesión aquí' }}
            </button>
          </p>
        </div>

      </div>
    </div>
  </div>
</div>
